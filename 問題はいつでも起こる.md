# 問題はいつでも起こる

Web 開発は常に過渡期なので、次から次にさまざまな課題にぶつかります。そんなときは一喜一憂することなく、淡々と対処したり放置したりして進むことになります。これはそれらについてのメモです。

## Vetur と Volar

VSCode で Vue2 のソースを編集するときいままでは Vetur プラグインを入れておけば良かったのですが、ここに来て問題が出るようになってきました。その原因は Vue3 の登場と TypeScript の普及です。このような現象がでました。

Vue3 の Fragment で書かれたコンポーネントについて Vetur が template 内のルートに複数の要素があるというエラーを出します。これは Vue3 では許される書式です。

Vue3 に特化した新しいプラグイン Volar が存在するというので、そちらをインストールし、Vetur を無効化しました。これでエラーは出なくなるはずと思ったところ、こんどは別のエラーが出現！

Vue3 では Vue2 の書き方も許されているので、それらが混在していると Volar はエラーと判断します。

ではどうすべきなのか？以下の選択肢が考えられます。

- エラーを無視する（本当のエラーとの混在を許す）
- Vetur の Vue3 対応を探る
- Volar の Vue2 対応を探る

今回は、Volar のサイトに Setup for Vue2 という項目があったのでそれに従うことにしました。ところがその解決策は、ひとつモジュール@vue/runtime-dom をインストールし、tsconfig.json に記述を追加するというものでした。tsconfig.json? TypeScript を使っていないのに！
ダメもとでトライしてみました。

まずモジュールをインストール

```shell
yarn add @vue/rutime-dom --dev
```

tsconfig.json ではなく jsconfig.json を作成し、以下を記述。

```json
{
  "vueCompilerOptions": {
    "experimentalCompatMode": 2
  }
}
```

ようやく上記のエラーが消えました。

## Chrome で GitHub に上げた Markdown ファイルが見えない

ドキュメントを Markdown で書いて GitHub にプッシュした。Chrome で GitHub のサイトからそのファイルを選択したみたら真っ白！どうして？家ではちゃんと見えたのにと思いながら、もしかしてと思い Chrome の拡張機能の Markdown Viewer を削除したところ、ちゃんと見えるようになった。
Chrome はすでに Markdown 表示機能を自前で持つようになったのかな？と
試しに、Markdown ファイルを Chrome 上にドラッグ＆ドロップしてみると、こんどは残念なことにソーステキストだけが表示された。Markdown Viewer が入っているときはレンダリングされたのに... でもまあ、VSCode の Markdown All in One で見られるからいいか。

## Vite の失敗

新しい Scaffolding Tool の Vite を使ってプロジェクトを作ろうと以下のコマンド実行。

```shell
yarn create vite
```

ところが、失敗。

```
'C:\Program' は、内部コマンドまたは外部コマンド、
操作可能なプログラムまたはバッチ ファイルとして認識されていません。
error Command failed.
```

どうやら Windows の空白を含むパスがお気に召さないようだ（WSL2 では成功するので）。そこで npm を使ってみる。

```
npm init vite
```

こんどは成功。

## markdown とローカル pdf

Pdf 形式の Vue のチートシートを Markdown に記述し、できればリンククリックで表示もしようとした。
リモート URL の表示法を試してみる。

```md
[Vue-3-Cheat-Sheet](Vue-3-Cheat-Sheet.pdf)
```

Ctrl+Shift+V で表示してみると、文字列だけしか表示されない。そこでネットリサーチ。あった。パスを追加すればよいのか。

```md
[Vue-3-Cheat-Sheet](./Vue-3-Cheat-Sheet.pdf)
```

Ctrl+Shift+V で表示してみると、ちゃんとリンク表示されている。リンクを押すと文字化けしたものが表示される。GitHub に push して Web ブラウザで見るからいいかとも思ったが、VSCode 上でも見られないかと、VSCode の拡張機能で pdf を検索してみた。やはりあった。その名も**vscode-pdf**というプラグインだ。インストールしてから、再度リンクをクリックすると今度は pdf が表示された。そして左のエクスプローラー内にある PDF ファイル名をクリックしても VSCode 内に PDF が表示される（こちらがメインの機能かも）。

## markdown から別の markdown ファイルへのリンク

ひとつの markdown ファイルから別の markdown ファイルへのリンクはできることはわかっていた。ただ日本語ファイル名のとき不安は残った。試しに以下のように記述してみた。

```md
[Vue による開発準備](Vueによる開発準備.md)
```

日本語ファイル名も大丈夫のようだ。[Vue による開発準備](Vueによる開発準備.md)

ところがページ内の日本語と空白のある見出しへのリンクはダメだった。

```md
[Vue による開発準備](Vue による開発準備.md## Vue による開発)
```

また小数点をもつ見出しへのリンクもできなかった。

```md
[Vue による開発準備](Vue による開発準備.md## 1.1 Vue による開発)
```

その後やみくもにいろいろパターンを試したが良い結果はえられなかった。その後諦めムードを感じながらもさらにネットをリサーチすると、ヒントがいくつか見つかった。

- ファイル名と見出しの間の#は原文の見出しにいくつ#があってもひとつにする。
- 空白は半角ハイフンにする
- 小数点は削除する

それではと試してみる。

```md
[Vue による開発準備](Vueによる開発準備.md#Vueによる開発)
```

[Vue による開発準備](Vueによる開発準備.md#Vue-による開発)

以上 to be continued ...
